# FakeMan 图形聊天界面使用指南

## 🎨 界面特点

### 双栏布局
- **左侧**：AI输出区域（灰色背景）
- **右侧**：用户输入区域（淡黄色背景）

### 时间戳显示
- 每条消息都带有 `[HH:MM:SS]` 格式的时间戳
- AI消息显示接收时间
- 用户消息显示发送时间

### 美观设计
- 现代化配色方案
- 清晰的区域划分
- 舒适的阅读体验

## 🚀 快速开始

### 1. 启动后端系统
```bash
# 终端1：启动FakeMan主系统
python main.py
```

### 2. 启动聊天界面
```bash
# 终端2：启动图形界面
python chat_gui.py
```

## 📝 使用方法

### 发送消息
1. 在右下方输入框输入文字
2. 点击"发送"按钮
3. 或按 `Ctrl + Enter` 快捷键发送

### 查看消息
- **左侧显示**：AI的所有回复
- **右上方显示**：你的消息历史

### 消息类型识别
- `🤖 AI:` - AI响应消息
- `🤖 AI (主动):` - AI主动发起的消息
- `💭 思考:` - AI的思考摘要（如果有）

## 🎯 界面功能

### 左侧 - AI输出区
```
┌─────────────────────────────┐
│   💬 AI 输出                │
├─────────────────────────────┤
│ [14:30:25] 🤖 AI: 你好！   │
│ 💭 思考: 友好问候           │
│                             │
│ [14:30:45] 🤖 AI (主动):   │
│ 需要帮助吗？                │
└─────────────────────────────┘
```

### 右侧 - 用户区域
```
┌─────────────────────────────┐
│   ✍️ 我的输入               │
├─────────────────────────────┤
│ 【历史记录】                │
│ [14:30:20] 我: 你好         │
│                             │
├─────────────────────────────┤
│ 【输入框】                  │
│ 💭 输入消息：               │
│ ┌─────────────┬─────────┐  │
│ │             │ 发送    │  │
│ │  输入...    │(Ctrl+   │  │
│ │             │ Enter)  │  │
│ └─────────────┴─────────┘  │
└─────────────────────────────┘
```

## 🎨 配色方案

### 颜色说明
- **标题栏**：深蓝灰 `#2c3e50`
- **AI输出区**：浅灰 `#ecf0f1`
- **用户历史区**：淡黄 `#fef9e7`
- **输入框**：白色 `#ffffff`
- **时间戳**：灰色 `#7f8c8d`
- **AI消息**：蓝色 `#2980b9`
- **用户消息**：紫色 `#8e44ad`
- **系统消息**：绿色 `#27ae60`

## 📊 状态栏

底部状态栏显示当前连接状态：

- 🟢 `已连接 | 等待消息...` - 正常待机
- 🟡 `已发送 | 等待AI回复...` - 消息已发送
- 🟢 `已连接 | AI已回复` - AI回复完成

## ⌨️ 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + Enter` | 发送消息 |
| `Alt + F4` | 关闭窗口 |

## 🔧 高级功能

### 消息监听
- 自动检测AI输出（每0.5秒）
- 实时显示新消息
- 支持主动对话和响应对话

### 消息格式
```json
// 用户输入 (user_input.json)
{
  "text": "你好",
  "timestamp": 1697123456.789,
  "metadata": {}
}

// AI输出 (ai_output.json)
{
  "text": "你好！有什么可以帮助你的吗？",
  "action_type": "response",
  "thought_summary": "友好问候，询问需求",
  "desires": {...},
  "timestamp": 1697123457.123
}
```

## 🐛 常见问题

### Q1: 窗口显示"发送失败"
**A:** 检查 `data/communication` 目录是否存在且有写入权限

### Q2: AI没有回复
**A:** 确保 `main.py` 正在运行：
```bash
# 检查是否运行
ps aux | grep main.py  # Linux/Mac
tasklist | findstr python  # Windows
```

### Q3: 消息显示乱码
**A:** 确保使用UTF-8编码，代码已默认设置

### Q4: 界面卡顿
**A:** AI输出监听在后台线程运行，不应卡顿。如卡顿可能是：
- 消息过多（考虑清理旧消息）
- 系统资源不足

## 🎯 使用场景

### 场景1：普通对话
```
你: 你好
AI: 你好！很高兴见到你。有什么我可以帮助的吗？
你: 介绍一下自己
AI: 我是FakeMan，一个具有自主思考能力的AI系统...
```

### 场景2：AI主动对话
```
[60秒无输入后]
AI (主动): 在吗？有什么我可以帮助你的吗？
💭 思考: existing欲望驱动，维持对话连续性
```

### 场景3：深度交流
```
你: 你会思考什么？
AI: 我会思考如何满足我的欲望...
💭 思考: 分析了existing、power、understanding等欲望状态
```

## 🔄 与chat.py的对比

| 特性 | chat.py | chat_gui.py |
|------|---------|-------------|
| 界面 | 命令行 | 图形界面 |
| 时间戳 | ✅ | ✅ |
| 历史记录 | 向上滚动 | 独立显示区 |
| 视觉效果 | 文本 | 彩色+图标 |
| 易用性 | 命令行用户 | 所有用户 |
| 思考显示 | 可选 | 自动显示 |

## 💡 提示

1. **保持main.py运行**：GUI只是界面，后端逻辑在main.py
2. **观察AI思考**：每条AI消息下方会显示简要思考过程
3. **主动对话**：长时间无输入时，AI可能主动发起对话
4. **多行输入**：输入框支持多行文本，按Enter换行

## 🎨 自定义

### 修改窗口大小
```python
# 在 ChatGUI.__init__ 中
self.root.geometry("1000x700")  # 宽x高
```

### 修改颜色
```python
# AI输出区背景
self.ai_text = scrolledtext.ScrolledText(
    ...,
    bg='#ecf0f1',  # 修改这里
    ...
)
```

### 修改字体
```python
# 修改字体和大小
font=('Microsoft YaHei UI', 10)  # 字体, 大小
```

## 📸 截图说明

界面布局：
```
╔═══════════════════════════════════════════════╗
║         🤖 FakeMan 聊天                       ║
╠═══════════════╦═══════════════════════════════╣
║ 💬 AI 输出    ║ ✍️ 我的输入                   ║
║               ║ ┌─────────────────────────┐   ║
║ AI消息区      ║ │ 消息历史                │   ║
║ (左侧)        ║ │ [14:30] 我: 你好        │   ║
║               ║ └─────────────────────────┘   ║
║               ║ 💭 输入消息：                 ║
║               ║ ┌──────────────┬────────┐    ║
║               ║ │              │ 发送   │    ║
║               ║ │   输入框     │(Ctrl+  │    ║
║               ║ │              │Enter)  │    ║
║               ║ └──────────────┴────────┘    ║
╠═══════════════╩═══════════════════════════════╣
║ 🟢 已连接 | 等待消息...                       ║
╚═══════════════════════════════════════════════╝
```

## 🚀 启动脚本

创建 `start_gui.bat` (Windows):
```batch
@echo off
echo 启动FakeMan图形聊天界面...
python chat_gui.py
pause
```

创建 `start_gui.sh` (Linux/Mac):
```bash
#!/bin/bash
echo "启动FakeMan图形聊天界面..."
python3 chat_gui.py
```

## 📝 总结

chat_gui.py 提供了一个：
- ✅ 美观的双栏聊天界面
- ✅ 实时时间戳显示
- ✅ 自动AI消息监听
- ✅ 清晰的消息分类
- ✅ 简单易用的交互

开始使用：
```bash
python main.py      # 终端1
python chat_gui.py  # 终端2
```

享受与FakeMan的对话吧！🎉

