# FakeMan æŒç»­æ€è€ƒç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ç³»ç»Ÿæ¦‚è¿°

FakeMan æŒç»­æ€è€ƒç³»ç»Ÿå®ç°äº†å¼‚æ­¥æŒç»­æ€è€ƒæ¨¡å‹ï¼ŒAI ä¼šæŒç»­è¿è¡Œå¹¶æ€è€ƒï¼Œè€Œä¸æ˜¯è¢«åŠ¨ç­‰å¾…ç”¨æˆ·è¾“å…¥ã€‚

### æ ¸å¿ƒç‰¹æ€§

1. **æŒç»­æ€è€ƒ**: æ¯ç§’æ€è€ƒä¸€æ¬¡å½“å‰çŠ¶æ€
2. **ä¸»åŠ¨è¡ŒåŠ¨**: æ ¹æ®å†…åœ¨æ¬²æœ›å‹åŠ›è¯„ä¼°æ˜¯å¦ä¸»åŠ¨å‘è¨€
3. **å¼‚æ­¥é€šä¿¡**: main.py å’Œ chat.py é€šè¿‡æ–‡ä»¶è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡
4. **æ¬²æœ›é©±åŠ¨**: æ‰€æœ‰è¡Œä¸ºç”±å†…åœ¨æ¬²æœ›çŠ¶æ€é©±åŠ¨

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FakeMan ç³»ç»Ÿ                          â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           main.py (æŒç»­æ€è€ƒè¿›ç¨‹)                  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  [æ¯1ç§’å¾ªç¯]                                      â”‚  â”‚
â”‚  â”‚    â”œâ”€ æ£€æŸ¥ç”¨æˆ·è¾“å…¥                                â”‚  â”‚
â”‚  â”‚    â”‚   â””â”€ å¦‚æœæœ‰ â†’ å¤„ç†å¹¶å›åº”                     â”‚  â”‚
â”‚  â”‚    â”‚                                              â”‚  â”‚
â”‚  â”‚    â”œâ”€ å†…éƒ¨æ€è€ƒ                                    â”‚  â”‚
â”‚  â”‚    â”‚   â””â”€ è¯„ä¼°æ¬²æœ›å‹åŠ›                            â”‚  â”‚
â”‚  â”‚    â”‚   â””â”€ è¯„ä¼°ä¸»åŠ¨è¡ŒåŠ¨æ”¶ç›Š vs é£é™©                â”‚  â”‚
â”‚  â”‚    â”‚   â””â”€ å¦‚æœæ¡ä»¶æ»¡è¶³ â†’ ä¸»åŠ¨å‘è¨€                 â”‚  â”‚
â”‚  â”‚    â”‚                                              â”‚  â”‚
â”‚  â”‚    â””â”€ æ›´æ–°ç³»ç»ŸçŠ¶æ€                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†•                              â”‚
â”‚                   [æ–‡ä»¶é€šä¿¡]                             â”‚
â”‚         user_input.json / ai_output.json               â”‚
â”‚              / system_state.json                        â”‚
â”‚                          â†•                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            chat.py (ç”¨æˆ·äº¤äº’ç•Œé¢)                 â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ æ¥æ”¶ç”¨æˆ·è¾“å…¥                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ å†™å…¥ user_input.json                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ ç­‰å¾…å¹¶è¯»å– ai_output.json                    â”‚  â”‚
â”‚  â”‚  â””â”€ æ˜¾ç¤º AI å›åº”                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æ–¹æ³•

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æŒç»­æ€è€ƒè¿›ç¨‹

åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­å¯åŠ¨ main.pyï¼š

```bash
# è®¾ç½®ç¼–ç ï¼ˆWindows PowerShellï¼‰
$env:PYTHONIOENCODING='utf-8'

# å¯åŠ¨ç³»ç»Ÿ
python main.py
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
============================================================
FakeMan æŒç»­æ€è€ƒç³»ç»Ÿ
============================================================

æ­£åœ¨åˆå§‹åŒ–...
[æ—¥å¿—] FakeMan ç³»ç»Ÿåˆå§‹åŒ–å¼€å§‹
[æ—¥å¿—] æ¬²æœ›ç³»ç»Ÿåˆå§‹åŒ–: DesireManager(...)
[æ—¥å¿—] è®°å¿†ç³»ç»Ÿåˆå§‹åŒ–: 0 æ¡ç»éªŒ
[æ—¥å¿—] é€šä¿¡ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ

FakeManSystem(cycles=0, memories=0)

å½“å‰æ¬²æœ›çŠ¶æ€:
  existing       : 0.400
  power          : 0.200
  understanding  : 0.250
  information    : 0.150

é€šä¿¡æ–‡ä»¶ç›®å½•: data\communication
  - è¾“å…¥æ–‡ä»¶: user_input.json
  - è¾“å‡ºæ–‡ä»¶: ai_output.json
  - çŠ¶æ€æ–‡ä»¶: system_state.json

æç¤º:
  - ç³»ç»Ÿå°†æŒç»­è¿è¡Œï¼Œæ¯ç§’æ€è€ƒä¸€æ¬¡
  - ä½¿ç”¨ chat.py è¿›è¡Œäº¤äº’
  - æŒ‰ Ctrl+C åœæ­¢ç³»ç»Ÿ

å¯åŠ¨æŒç»­æ€è€ƒå¾ªç¯...
============================================================
[æ—¥å¿—] å¼€å§‹æŒç»­æ€è€ƒå¾ªç¯
[æ—¥å¿—] [é™é»˜æ€è€ƒ] æ— å……åˆ†ç†ç”±
[æ—¥å¿—] [é™é»˜æ€è€ƒ] æ— å……åˆ†ç†ç”±
...
```

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ç”¨æˆ·äº¤äº’ç•Œé¢

åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­å¯åŠ¨ chat.pyï¼š

```bash
# è®¾ç½®ç¼–ç ï¼ˆWindows PowerShellï¼‰
$env:PYTHONIOENCODING='utf-8'

# å¯åŠ¨èŠå¤©ç•Œé¢
python chat.py
```

ä½ ä¼šçœ‹åˆ°ï¼š

```
============================================================
  FakeMan èŠå¤©ç•Œé¢
============================================================

  æ¬¢è¿ä½¿ç”¨ FakeMan èŠå¤©ç³»ç»Ÿï¼

  è¿™æ˜¯ä¸€ä¸ªåŸºäºæ¬²æœ›é©±åŠ¨çš„ AI ç³»ç»Ÿï¼š
  â€¢ AI ä¼šæŒç»­æ€è€ƒå½“å‰çŠ¶æ€
  â€¢ AI å¯èƒ½ä¼šä¸»åŠ¨å‘èµ·å¯¹è¯
  â€¢ AI çš„è¡Œä¸ºç”±å†…åœ¨æ¬²æœ›é©±åŠ¨

------------------------------------------------------------
  ç³»ç»ŸçŠ¶æ€
------------------------------------------------------------
  çŠ¶æ€: running
  å‘¨æœŸ: 0

  å½“å‰æ¬²æœ›:
    ğŸ’š existing     : 0.400
    âš¡ power        : 0.200
    ğŸ¤ understanding: 0.250
    ğŸ“š information  : 0.150

============================================================
  å¼€å§‹å¯¹è¯
============================================================
æç¤º:
  - è¾“å…¥æ¶ˆæ¯ä¸ FakeMan å¯¹è¯
  - è¾“å…¥ 'state' æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
  - è¾“å…¥ 'desires' æŸ¥çœ‹æ¬²æœ›çŠ¶æ€
  - è¾“å…¥ 'history' æŸ¥çœ‹å¯¹è¯å†å²
  - è¾“å…¥ 'quit' æˆ– 'exit' é€€å‡º

ä½ : 
```

### ç¬¬ä¸‰æ­¥ï¼šä¸ AI å¯¹è¯

ç›´æ¥è¾“å…¥æ¶ˆæ¯ï¼š

```
ä½ : ä½ å¥½ï¼Œä½ æ˜¯è°ï¼Ÿ
[FakeMan æ­£åœ¨æ€è€ƒ...]

FakeMan: ä½ å¥½ï¼æˆ‘æ˜¯ FakeManï¼Œä¸€ä¸ªåŸºäºæ¬²æœ›é©±åŠ¨çš„ AI ç³»ç»Ÿ...

[æ€è€ƒ] ç”¨æˆ·è¯¢é—®èº«ä»½ï¼Œé€‰æ‹©å¦è¯šå›ç­”ä»¥å»ºç«‹ä¿¡ä»»å’Œç†è§£
```

### ç‰¹æ®Šå‘½ä»¤

- `state` / `s` - æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
- `desires` / `d` - æŸ¥çœ‹æ¬²æœ›çŠ¶æ€
- `history` / `h` - æŸ¥çœ‹å¯¹è¯å†å²
- `quit` / `exit` / `q` - é€€å‡º

## ä¸»åŠ¨è¡ŒåŠ¨æœºåˆ¶

AI ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¸»åŠ¨å‘è¨€ï¼š

### 1. existing æ¬²æœ›é©±åŠ¨

å½“ `existing` æ¬²æœ› > 0.5 ä¸”è·ä¸Šæ¬¡è¡ŒåŠ¨ > 60ç§’æ—¶ï¼š

```
[main.py æ—¥å¿—]
[ä¸»åŠ¨æ€è€ƒ] å†³å®šä¸»åŠ¨è¡ŒåŠ¨: existingæ¬²æœ›é©±åŠ¨ï¼ˆ0.62ï¼‰, é¢„æœŸæ”¶ç›Š: 0.186
ä¸»åŠ¨è¡ŒåŠ¨å‘¨æœŸ #3
åŸå› : existingæ¬²æœ›é©±åŠ¨ï¼ˆ0.62ï¼‰
```

```
[chat.py æ˜¾ç¤º]
ğŸ’¡ [FakeMan ä¸»åŠ¨å‘è¨€]
FakeMan: æˆ‘ä»¬èŠäº†è¿™ä¹ˆä¹…ï¼Œä½ è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆæƒ³ç»§ç»­æ¢è®¨çš„å—ï¼Ÿ
```

### 2. information æ¬²æœ›é©±åŠ¨

å½“ `information` æ¬²æœ› > 0.3 ä¸”æ¬²æœ›å‹åŠ› > 0.2æ—¶ï¼š

```
ğŸ’¡ [FakeMan ä¸»åŠ¨å‘è¨€]
FakeMan: æœ‰ä¸ªé—®é¢˜æˆ‘ä¸€ç›´åœ¨æƒ³ï¼Œä½ å¯¹è¿™ä¸ªè¯é¢˜æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ
```

### 3. understanding æ¬²æœ›é©±åŠ¨

å½“ `understanding` æ¬²æœ› > 0.35 ä¸”è·ä¸Šæ¬¡è¡ŒåŠ¨ > 120ç§’æ—¶ï¼š

```
ğŸ’¡ [FakeMan ä¸»åŠ¨å‘è¨€]
FakeMan: æˆ‘å¸Œæœ›ç¡®è®¤ä¸€ä¸‹ï¼Œæˆ‘çš„è§£é‡Šä½ æ˜¯å¦ç†è§£äº†ï¼Ÿ
```

## æ–‡ä»¶é€šä¿¡åè®®

### user_input.json

```json
{
  "text": "ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯",
  "timestamp": 1234567890.123,
  "metadata": {}
}
```

### ai_output.json

```json
{
  "text": "AI çš„å›å¤",
  "action_type": "response",  // æˆ– "proactive" æˆ– "idle"
  "thought_summary": "æ€è€ƒæ‘˜è¦",
  "desires": {
    "existing": 0.45,
    "power": 0.22,
    "understanding": 0.18,
    "information": 0.15
  },
  "timestamp": 1234567890.456
}
```

### system_state.json

```json
{
  "status": "running",  // "initializing", "running", "stopped", "error"
  "cycle": 15,
  "desires": {
    "existing": 0.45,
    "power": 0.22,
    "understanding": 0.18,
    "information": 0.15
  },
  "context": "å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡",
  "last_action_time": 1234567890.789
}
```

## ç³»ç»Ÿè°ƒä¼˜

### è°ƒæ•´æ€è€ƒé¢‘ç‡

åœ¨ `main.py` çš„ `continuous_thinking_loop()` æ–¹æ³•ä¸­ä¿®æ”¹ï¼š

```python
if elapsed < 1.0:  # æ”¹ä¸º 0.5 è¡¨ç¤ºæ¯0.5ç§’æ€è€ƒä¸€æ¬¡
    time.sleep(1.0 - elapsed)
```

### è°ƒæ•´ä¸»åŠ¨è¡ŒåŠ¨é˜ˆå€¼

åœ¨ `ActionEvaluator.should_act_proactively()` æ–¹æ³•ä¸­ä¿®æ”¹ï¼š

```python
# æœ€å°æ—¶é—´é—´éš”
if time_since_last < 30:  # æ”¹ä¸ºæ›´å¤§æˆ–æ›´å°çš„å€¼
    return False, "æ—¶é—´é—´éš”å¤ªçŸ­", 0.0

# existing æ¬²æœ›é˜ˆå€¼
if dominant_value > 0.5 and time_since_last > 60:  # è°ƒæ•´é˜ˆå€¼
    ...
```

### è°ƒæ•´æ¬²æœ›æ›´æ–°é€Ÿåº¦

åœ¨é…ç½®æ–‡ä»¶æˆ– `DesireUpdater` ä¸­è°ƒæ•´ä¿¡å·å¼ºåº¦å’Œæ›´æ–°ç‡ã€‚

## ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹å®æ—¶æ—¥å¿—

main.py çš„æ‰€æœ‰æ´»åŠ¨éƒ½è®°å½•åœ¨æ—¥å¿—ä¸­ï¼š

```bash
# æŸ¥çœ‹ä¸»æ—¥å¿—
tail -f data/logs/fakeman.log

# æŸ¥çœ‹æ¬²æœ›å˜åŒ–
tail -f data/logs/desire_changes.jsonl

# æŸ¥çœ‹å†³ç­–å‘¨æœŸ
tail -f data/logs/decision_cycles.jsonl
```

### æŸ¥çœ‹é€šä¿¡æ–‡ä»¶

```bash
# å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ï¼ˆWindowsï¼‰
Get-Content data/communication/system_state.json -Wait

# Linux/Mac
watch -n 1 cat data/communication/system_state.json
```

## å¸¸è§é—®é¢˜

### Q: chat.py æç¤ºç³»ç»Ÿæœªè¿è¡Œï¼Ÿ

A: ç¡®ä¿ main.py åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­æ­£åœ¨è¿è¡Œã€‚

### Q: AI ä¸€ç›´ä¸ä¸»åŠ¨å‘è¨€ï¼Ÿ

A: ä¸»åŠ¨è¡ŒåŠ¨æœ‰ä¸¥æ ¼çš„æ¡ä»¶ã€‚å¯ä»¥ï¼š
1. é™ä½ä¸»åŠ¨è¡ŒåŠ¨çš„é˜ˆå€¼
2. å¢åŠ æ¬²æœ›å‹åŠ›ï¼ˆé€šè¿‡å¯¹è¯æ”¹å˜æ¬²æœ›çŠ¶æ€ï¼‰
3. ç­‰å¾…æ›´é•¿æ—¶é—´

### Q: å“åº”è¶…æ—¶ï¼Ÿ

A: æ£€æŸ¥ï¼š
1. main.py æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. LLM API æ˜¯å¦å¯ç”¨
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. å¢åŠ  `wait_for_response()` çš„è¶…æ—¶æ—¶é—´

### Q: å¦‚ä½•åœæ­¢ç³»ç»Ÿï¼Ÿ

A: 
1. chat.py: è¾“å…¥ `quit` æˆ–æŒ‰ Ctrl+C
2. main.py: æŒ‰ Ctrl+C

## è¿›é˜¶ä½¿ç”¨

### å¤šç”¨æˆ·æ”¯æŒ

å¯ä»¥ä¿®æ”¹é€šä¿¡æ–‡ä»¶ç»“æ„ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºç‹¬ç«‹çš„é€šä¿¡ç›®å½•ï¼š

```python
comm = CommunicationFiles(comm_dir=f"data/communication/{user_id}")
```

### æŒä¹…åŒ–å¯¹è¯

åœ¨ `_handle_user_input()` ä¸­è°ƒç”¨ `handle_response()` è®°å½•ç»éªŒï¼š

```python
# åœ¨ä¸‹ä¸€æ¬¡ç”¨æˆ·è¾“å…¥æ—¶ï¼Œæ ¹æ®å†…å®¹åˆ¤æ–­ä¸Šæ¬¡å›åº”çš„æ•ˆæœ
response_type = self._infer_response_type(user_input)
exp = self.handle_response(last_result, user_input, response_type)
```

### è‡ªå®šä¹‰è¡ŒåŠ¨è¯„ä¼°

ç»§æ‰¿ `ActionEvaluator` å¹¶é‡å†™ `should_act_proactively()` æ–¹æ³•ï¼Œå®ç°è‡ªå®šä¹‰çš„ä¸»åŠ¨è¡ŒåŠ¨é€»è¾‘ã€‚

## æ€»ç»“

æŒç»­æ€è€ƒç³»ç»Ÿè®© FakeMan çœŸæ­£"æ´»"äº†èµ·æ¥ï¼š
- âœ… æŒç»­è¿è¡Œï¼Œæ—¶åˆ»æ€è€ƒ
- âœ… ä¸»åŠ¨è¡ŒåŠ¨ï¼Œä¸åªæ˜¯è¢«åŠ¨å›åº”
- âœ… æ¬²æœ›é©±åŠ¨ï¼Œè¡Œä¸ºæœ‰å†…åœ¨åŠ¨æœº
- âœ… å¼‚æ­¥é€šä¿¡ï¼Œæ”¯æŒå¤šè¿›ç¨‹æ¶æ„

äº«å—ä¸ FakeMan çš„å¯¹è¯å§ï¼

