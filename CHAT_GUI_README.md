# FakeMan 图形聊天界面 🎨

## 📝 简介

一个简洁美观的Tkinter图形聊天界面，用于与FakeMan AI系统交互。

## ✨ 特性

### 🎯 核心功能
- ✅ **双栏布局** - 左侧AI输出，右侧用户输入
- ✅ **实时时间戳** - 每条消息显示 `[HH:MM:SS]`
- ✅ **自动监听** - 实时检测AI回复（0.5秒/次）
- ✅ **消息分类** - 区分响应/主动/系统消息
- ✅ **思考显示** - 展示AI的思考摘要
- ✅ **快捷键** - `Ctrl+Enter` 快速发送

### 🎨 界面设计
- **现代化配色** - 舒适的视觉体验
- **清晰布局** - 信息一目了然
- **响应式设计** - 自适应窗口大小
- **状态栏** - 实时显示连接状态

## 🚀 快速开始

### 1. 启动后端
```bash
python main.py
```

### 2. 启动GUI
```bash
# 方式1：使用启动脚本
start_gui.bat          # Windows
./start_gui.sh         # Linux/Mac

# 方式2：直接运行
python chat_gui.py
```

### 3. 开始聊天
- 在右下输入框输入消息
- 按 `Ctrl+Enter` 或点击"发送"
- 在左侧查看AI回复

## 📸 界面截图

```
╔═════════════════════════════════════════════════════════╗
║              🤖 FakeMan 聊天                            ║
╠═════════════════════════╦═══════════════════════════════╣
║  💬 AI 输出             ║  ✍️ 我的输入                  ║
║                         ║  ┌─────────────────────────┐  ║
║ [14:30:25] 🤖 AI: 你好  ║  │ [14:30:20] 我: 你好    │  ║
║ 💭 思考: 友好问候       ║  └─────────────────────────┘  ║
║                         ║                               ║
║ [14:31:05] 🤖 AI:       ║  💭 输入消息：                ║
║ 有什么可以帮你的？      ║  ┌──────────┬──────────┐     ║
║                         ║  │          │  发送    │     ║
║                         ║  │  输入... │ (Ctrl+   │     ║
║                         ║  │          │  Enter)  │     ║
║                         ║  └──────────┴──────────┘     ║
╠═════════════════════════╩═══════════════════════════════╣
║ 🟢 已连接 | 等待消息...                                  ║
╚═════════════════════════════════════════════════════════╝
```

## 🎨 配色方案

| 元素 | 颜色 | 说明 |
|------|------|------|
| AI消息 | 🔵 蓝色 `#2980b9` | 清晰醒目 |
| 用户消息 | 🟣 紫色 `#8e44ad` | 区分身份 |
| 系统消息 | 🟢 绿色 `#27ae60` | 状态提示 |
| 时间戳 | ⚪ 灰色 `#7f8c8d` | 不抢眼 |
| AI输出区 | 📄 浅灰 `#ecf0f1` | 舒适阅读 |
| 用户区 | 📝 淡黄 `#fef9e7` | 温暖友好 |

## 💡 使用技巧

### 快捷操作
- `Ctrl + Enter` - 发送消息
- `Enter` - 换行（多行输入）
- `Alt + F4` - 关闭窗口

### 消息类型识别
| 图标 | 含义 |
|-----|------|
| 🤖 AI: | AI响应消息 |
| 🤖 AI (主动): | AI主动发起 |
| 💭 思考: | 思考摘要 |
| ❌ | 错误提示 |

### 观察AI行为
1. **响应模式** - 回答你的问题
2. **主动模式** - 长时间无输入后主动对话
3. **思考展示** - 每条消息显示AI的思考过程

## 📁 文件结构

```
fakeman-project/
├── chat_gui.py              # 🎨 GUI主程序
├── start_gui.bat            # Windows启动脚本
├── start_gui.sh             # Linux/Mac启动脚本
├── GUI_QUICKSTART.md        # 快速开始
├── CHAT_GUI_README.md       # 本文档
└── docs/
    └── CHAT_GUI_GUIDE.md    # 详细指南
```

## 🔧 技术细节

### 架构
```
chat_gui.py
    ├── ChatGUI (主类)
    │   ├── __init__() - 初始化界面
    │   ├── _create_widgets() - 创建UI组件
    │   ├── send_message() - 发送消息
    │   ├── _monitor_ai_output() - 监听AI（后台线程）
    │   └── run() - 运行主循环
    └── 通信文件
        ├── user_input.json - 用户输入
        └── ai_output.json - AI输出
```

### 通信机制
```python
# 发送消息
user_input.json {
    "text": "消息内容",
    "timestamp": 1697123456.789,
    "metadata": {}
}

# 接收回复
ai_output.json {
    "text": "AI回复",
    "action_type": "response",
    "thought_summary": "思考摘要",
    "timestamp": 1697123457.123
}
```

### 后台监听
- 独立线程每0.5秒检查AI输出
- 基于时间戳判断新消息
- 自动更新UI（thread-safe）

## 🎯 与chat.py的区别

| 特性 | chat.py | chat_gui.py |
|------|---------|-------------|
| 界面 | 命令行文本 | 图形窗口 |
| 布局 | 线性滚动 | 双栏分离 |
| 颜色 | 终端颜色 | 丰富配色 |
| 时间 | 可选显示 | 始终显示 |
| 历史 | 向上翻 | 独立区域 |
| 思考 | 可切换 | 自动显示 |
| 易用性 | 需命令行经验 | 所有用户友好 |

## 🐛 故障排查

### 常见问题

**Q: 窗口打不开？**
```bash
# 检查Tkinter
python -m tkinter
```

**Q: AI不回复？**
```bash
# 确保main.py运行
ps aux | grep main.py  # Linux/Mac
tasklist | findstr python  # Windows
```

**Q: 中文乱码？**
- 已设置UTF-8，应该不会乱码
- 如有问题，检查系统区域设置

**Q: 想调整窗口大小？**
```python
# 编辑 chat_gui.py 第17行
self.root.geometry("1000x700")  # 宽x高
```

## 📊 性能说明

- **内存占用** - 约20-30MB
- **CPU占用** - 几乎为0（空闲时）
- **监听频率** - 0.5秒/次
- **启动时间** - <1秒

## 🎓 代码示例

### 自定义颜色
```python
# 修改AI消息颜色
self.ai_text.tag_config(
    'ai_message', 
    foreground='#2980b9',  # 改为你喜欢的颜色
    font=('Microsoft YaHei UI', 10)
)
```

### 修改监听频率
```python
# _monitor_ai_output 方法中
time.sleep(0.5)  # 改为1.0则每秒检查一次
```

### 添加消息音效
```python
# 在 _append_to_text 方法中
import winsound
winsound.Beep(1000, 100)  # Windows
```

## 📚 相关文档

- **详细指南** - `docs/CHAT_GUI_GUIDE.md`
- **快速开始** - `GUI_QUICKSTART.md`
- **系统文档** - `README.md`
- **使用指南** - `USAGE_GUIDE.md`

## 🎉 开始使用

```bash
# 1. 启动FakeMan后端
python main.py

# 2. 启动图形界面
python chat_gui.py

# 3. 开始愉快的聊天！
```

## 🌟 特别说明

这个GUI是为FakeMan系统设计的轻量级界面：
- ✅ 简单易用
- ✅ 美观清晰
- ✅ 实时响应
- ✅ 功能完整

适合：
- 日常与AI对话
- 观察AI思考过程
- 测试系统功能
- 展示系统能力

---

**享受与FakeMan的对话体验！** 🎊

